"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),Log=function(){function e(t,n){_classCallCheck(this,e),this.log=[],this.limitMin=t,this.limitMax=n,this.simple=!0}return _createClass(e,[{key:"setSimple",value:function(){}},{key:"add",value:function(e){if(this.log.push(e),this.simple)return void(this.log.length>this.limitMax&&this.log.splice(0,1))}},{key:"getAverage",value:function(){var e=this.log.reduce(function(e,t){return e+t});return e/=this.log.length}},{key:"getCurrent",value:function(){return this.getLog(this.getLength()-1)}},{key:"getLog",value:function(e){return null!=e?this.log[e]:this.log}},{key:"getLength",value:function(){return this.log.length}}]),e}(),Shrimp=function(){function e(){_classCallCheck(this,e),this.angle=2*Math.random()*Math.PI,this.speed=.001*Math.random()+.01}return _createClass(e,[{key:"update",value:function(e){this.position.x+=Math.sin(this.angle)*this.speed*e,this.position.y+=Math.sin(this.angle)*this.speed*e}},{key:"render",value:function(){}}]),e}(),Fish=function(){function e(){_classCallCheck(this,e),this.position={},this.log=new Log(20,100),this.logRefIndex=0}return _createClass(e,[{key:"setPosition",value:function(e){this.position=e}},{key:"getLogRefIndex",value:function(){return this.logRefIndex}},{key:"update",value:function(e){this.log.add(this.position)}},{key:"movementTest",value:function(e){hero.setPosition({x:width/2+Math.sin(e/400)*width/3,y:height/2+Math.cos(e/400)*height/3})}},{key:"render",value:function(){}}]),e}(),Food=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.object=new Phaser.Circle(Math.random()*game.width,Math.random()*game.height,Math.floor(10*Math.random()+5)),e.angle=2*Math.random()*Math.PI,e}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.object.x+=Math.sin(this.angle),this.object.y+=Math.cos(this.angle)}},{key:"render",value:function(){graphics.beginFill(16711680,1),graphics.drawCircle(this.object.x,this.object.y,this.object.diameter)}}]),t}(Shrimp),Hero=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),t}(Fish),framesPerSecond=60,t=0,dt=0,dtLog=new Log(100,400),dtFactor=0,dtSlip=0;dtLog.setSimple();var time=function(){dt=millis()-t,dt<1e3/framesPerSecond&&(dt=1e3/framesPerSecond),dtLog.add(dt),t+=dt,dtSlip=dtLog.getAverage()-1e3/framesPerSecond,dtSlip<0&&(dtSlip=0)},game={width:200,height:200},graphics=void 0,hero=void 0,foods=[];window.onload=function(){game=new Phaser.Game(game.width,game.height,Phaser.CANVAS,"game",{preload:preload,create:create,update:update,render:render},!0)};var preload=function(){},create=function(){game.scale.scaleMode=Phaser.ScaleManager.RESIZE,game.scale.parentIsWindow=!0,graphics=game.add.graphics(0,0);for(var e=0;e<200;e++)foods.push(new Food);setTimeout(function(){console.log("game: "+game.width+" x "+game.height),console.log("game.world: "+game.world.width+" x "+game.world.height)},1e3)},update=function(){foods.map(function(e){e.update(dt)})},render=function(){graphics.clear(),graphics.beginFill(16755200,1),graphics.drawRect(0,0,game.width,game.height),graphics.endFill(),foods.map(function(e){e.render()})};